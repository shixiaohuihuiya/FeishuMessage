name: Daily Work Reminder

on:
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è§¦å‘
  schedule:
    # åŒ—äº¬æ—¶é—´æ—©ä¸Š9ç‚¹ (UTC+8) = UTCæ—¶é—´å‡Œæ™¨1ç‚¹
    - cron: '0 1 * * *'
    # åŒ—äº¬æ—¶é—´ä¸‹åˆ3ç‚¹ (UTC+8) = UTCæ—¶é—´æ—©ä¸Š7ç‚¹
    - cron: '0 7 * * *'

jobs:
  send-reminder:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Send Morning Reminder
      if: github.event.schedule == '0 1 * * *'
      run: |
        curl -X POST \
          "https://open.feishu.cn/open-apis/bot/v2/hook/9057b68c-ebfc-4a5a-9a43-7a878b04b258" \
          -H "Content-Type: application/json" \
          -d '{
            "msg_type": "interactive",
            "card": {
              "config": {
                "wide_screen_mode": true
              },
              "header": {
                "title": {
                  "tag": "plain_text",
                  "content": "ğŸŒ æ—©å®‰ï¼å¼€å§‹ä»Šå¤©çš„å·¥ä½œå§"
                },
                "template": "wathet"
              },
              "elements": [
                {
                  "tag": "div",
                  "text": {
                    "tag": "lark_md",
                    "content": "**ğŸ“‹ ä»Šæ—¥å·¥ä½œæé†’**\n\nğŸ¯ **é‡è¦ä»»åŠ¡æ£€æŸ¥ï¼š**\nâ€¢ 60è¡¨æ˜¯å¦å·²ä¸Šä¼ ï¼Ÿ\nâ€¢ æ˜¨æ—¥å·¥ä½œæ˜¯å¦å·²å®Œæˆï¼Ÿ\nâ€¢ ä»Šæ—¥è®¡åˆ’æ˜¯å¦æ˜ç¡®ï¼Ÿ\n\nâ° **æé†’æ—¶é—´ï¼š** '"$(TZ='Asia/Shanghai' date '+%Y-%m-%d %H:%M:%S')"'\n\nğŸ’« **ä»Šæ—¥å¯„è¯­ï¼š**\næ–°çš„ä¸€å¤©ï¼Œæ–°çš„å¼€å§‹ï¼ä¿æŒç§¯æå¿ƒæ€ï¼Œå·¥ä½œæ•ˆç‡ç¿»å€ï¼ğŸš€"
                  }
                },
                {
                  "tag": "hr"
                },
                {
                  "tag": "div",
                  "text": {
                    "tag": "lark_md",
                    "content": "ğŸŒˆ **å·¥ä½œå°è´´å£«ï¼š**\nâ€¢ å…ˆå®Œæˆæœ€é‡è¦çš„ä»»åŠ¡\nâ€¢ ä¿æŒä¸“æ³¨ï¼Œä¸€æ¬¡åªåšä¸€ä»¶äº‹\nâ€¢ è®°å¾—é€‚å½“ä¼‘æ¯ï¼Œä¿æŠ¤çœ¼ç›\nâ€¢ ä¿æŒæ¡Œé¢æ•´æ´ï¼Œå¿ƒæƒ…æ›´æ„‰æ‚¦"
                  }
                },
                {
                  "tag": "action",
                  "actions": [
                    {
                      "tag": "button",
                      "text": {
                        "tag": "plain_text",
                        "content": "ğŸ‘ æ”¶åˆ°ï¼Œå¼€å§‹å·¥ä½œ"
                      },
                      "type": "primary"
                    }
                  ]
                }
              ]
            }
          }'

    - name: Send Afternoon Reminder
      if: github.event.schedule == '0 7 * * *'
      run: |
        curl -X POST \
          "https://open.feishu.cn/open-apis/bot/v2/hook/9057b68c-ebfc-4a5a-9a43-7a878b04b258" \
          -H "Content-Type: application/json" \
          -d '{
            "msg_type": "interactive",
            "card": {
              "config": {
                "wide_screen_mode": true
              },
              "header": {
                "title": {
                  "tag": "plain_text",
                  "content": "â˜• ä¸‹åˆå¥½ï¼ç»§ç»­åŠ æ²¹"
                },
                "template": "orange"
              },
              "elements": [
                {
                  "tag": "div",
                  "text": {
                    "tag": "lark_md",
                    "content": "**ğŸ“Š ä¸‹åˆå·¥ä½œæ£€æŸ¥**\n\nğŸ¯ **è¿›åº¦ç¡®è®¤ï¼š**\nâ€¢ 60è¡¨æ˜¯å¦å·²æŒ‰æ—¶ä¸Šä¼ ï¼Ÿ\nâ€¢ ä¸Šåˆä»»åŠ¡å®Œæˆæƒ…å†µå¦‚ä½•ï¼Ÿ\nâ€¢ ä¸‹åˆå·¥ä½œé‡ç‚¹æ˜ç¡®äº†å—ï¼Ÿ\n\nâ° **æé†’æ—¶é—´ï¼š** '"$(TZ='Asia/Shanghai' date '+%Y-%m-%d %H:%M:%S')"'\n\nğŸ’ª **åŠ æ²¹é¼“åŠ±ï¼š**\nä¸‹åˆæ˜¯åˆ›é€ å¥‡è¿¹çš„æ—¶é—´ï¼ç»§ç»­ä¿æŒä¸“æ³¨ï¼Œèƒœåˆ©åœ¨æœ›ï¼âœ¨"
                  }
                },
                {
                  "tag": "hr"
                },
                {
                  "tag": "div",
                  "text": {
                    "tag": "lark_md",
                    "content": "ğŸŒŸ **ä¸‹åˆå·¥ä½œå»ºè®®ï¼š**\nâ€¢ å›é¡¾ä¸Šåˆè¿›åº¦ï¼Œè°ƒæ•´ä¸‹åˆè®¡åˆ’\nâ€¢ å¤„ç†éœ€è¦æ·±åº¦æ€è€ƒçš„ä»»åŠ¡\nâ€¢ é€‚å½“æ´»åŠ¨ï¼Œä¿æŒç²¾åŠ›å……æ²›\nâ€¢ ä¸ºæ˜å¤©çš„å·¥ä½œåšå¥½å‡†å¤‡"
                  }
                },
                {
                  "tag": "action",
                  "actions": [
                    {
                      "tag": "button",
                      "text": {
                        "tag": "plain_text",
                        "content": "ğŸ’ª ç»§ç»­åŠªåŠ›"
                      },
                      "type": "primary"
                    }
                  ]
                }
              ]
            }
          }'

    - name: Log Success
      run: |
        echo "âœ… é£ä¹¦æé†’æ¶ˆæ¯å‘é€æˆåŠŸï¼"
        echo "å‘é€æ—¶é—´ï¼š$(TZ='Asia/Shanghai' date '+%Y-%m-%d %H:%M:%S')"
