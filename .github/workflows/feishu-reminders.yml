# é£ä¹¦æ¯æ—¥æé†’

name: Feishu Daily Reminders

on:
  schedule:
    # æ¯å¤©ä¸Šåˆ9ç‚¹ (UTC+8 åŒ—äº¬æ—¶é—´)
    - cron: '0 1 * * *'   # UTCæ—¶é—´1ç‚¹ = åŒ—äº¬æ—¶é—´9ç‚¹
    # æ¯å¤©ä¸‹åˆ3ç‚¹ (UTC+8 åŒ—äº¬æ—¶é—´)
    - cron: '0 7 * * *'   # UTCæ—¶é—´7ç‚¹ = åŒ—äº¬æ—¶é—´15ç‚¹
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è§¦å‘

jobs:
  send-feishu-message:
    runs-on: ubuntu-latest
    
    steps:
    - name: Send morning reminder
      if: github.event.schedule == '0 1 * * *'  # åªåœ¨ä¸Šåˆ9ç‚¹è§¦å‘æ—¶æ‰§è¡Œ
      run: |
        curl -X POST \
          ${{ secrets.FEISHU_WEBHOOK_URL }} \
          -H 'Content-Type: application/json' \
          -d '{
            "msg_type": "interactive",
            "card": {
              "elements": [{
                  "tag": "div",
                  "text": {
                    "tag": "lark_md",
                    "content": "â° **ä¸Šåˆå·¥ä½œæé†’**\n\nç¾å¥½çš„ä¸€å¤©å¼€å§‹å•¦ï¼\nâ€¢ æ£€æŸ¥ä»Šæ—¥å·¥ä½œè®¡åˆ’\nâ€¢ ä»Šå¤©æœ‰60å¼ è¡¨è¦ä¸Šä¼ å—ï¼Ÿ\nâ€¢ å¼€å§‹ä¸“æ³¨å·¥ä½œ\nâ€¢ è®°å¾—è¡¥å……æ°´åˆ† ğŸ’§"
                  }
                },
                {
                  "tag": "hr"
                },
                {
                  "tag": "div",
                  "text": {
                    "tag": "lark_md",
                    "content": "**ä»Šæ—¥æé†’ï¼š**\nâ€¢ å®Œæˆä¸»è¦ä»»åŠ¡\nâ€¢ 60è¡¨ä¸Šä¼ äº†å—ï¼Ÿ\"
                  }
                }
              ],
              "header": {
                "template": "blue",
                "title": {
                  "content": "ğŸŒ æ—©å®‰æé†’ | ",
                  "tag": "plain_text"
                }
              }
            }
          }'
      
    - name: Send afternoon reminder
      if: github.event.schedule == '0 7 * * *'  # åªåœ¨ä¸‹åˆ3ç‚¹è§¦å‘æ—¶æ‰§è¡Œ
      run: |
        curl -X POST \
          ${{ secrets.FEISHU_WEBHOOK_URL }} \
          -H 'Content-Type: application/json' \
          -d '{
            "msg_type": "interactive",
            "card": {
              "elements": [{
                  "tag": "div",
                  "text": {
                    "tag": "lark_md",
                    "content": "â˜• **ä¸‹åˆå·¥ä½œæé†’**\n\nä¸‹åˆæ—¶å…‰ï¼Œç»§ç»­åŠ æ²¹ï¼\nâ€¢ å›é¡¾ä¸Šåˆå·¥ä½œè¿›åº¦\nâ€¢ è§„åˆ’ä¸‹åˆä»»åŠ¡å®‰æ’\nâ€¢ é€‚å½“ä¼‘æ¯æ”¾æ¾\nâ€¢ ä¿æŒé«˜æ•ˆçŠ¶æ€ ğŸš€"
                  }
                },
                {
                  "tag": "hr"
                },
                {
                  "tag": "div",
                  "text": {
                    "tag": "lark_md",
                    "content": "**è¿›åº¦æ£€æŸ¥ï¼š**\nâ€¢ ä¸Šåˆä»»åŠ¡å®Œæˆæƒ…å†µ\nâ€¢ ä¸‹åˆé‡ç‚¹äº‹é¡¹\nâ€¢ æ˜æ—¥è®¡åˆ’å‡†å¤‡"
                  }
                }
              ],
              "header": {
                "template": "wathet",
                "title": {
                  "content": "ğŸŒ… åˆåæé†’ | ",
                  "tag": "plain_text"
                }
              }
            }
          }'